{% extends "../base.html" %}
{% block title %} Portal Revergy | Recursos Humanos{% endblock %}
{% load static %}
{% block content %}

    <div class="pagetitle">
      <h1>Panel de control</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item active"><i class="bi bi-house-door"></i> Home</li>
          <li class="breadcrumb-item">Panel de control</li>
          
        </ol>
      </nav>
    </div>

    {% if messages %}

      {% for message in messages %}
        <div class="alert {{ message.tags }} alert-dismissible fade show" role="alert">

          {% if message.tags == 'alert-success' %}
            <i class="bi bi-check-circle-fill"></i> {{ message }}

            {% elif message.tags == 'alert-primary' %}
              <i class="bi bi-star me-1"></i> {{ message }}

            {% elif message.tags == 'alert-danger' %}
              <i class="bi bi-exclamation-octagon me-1"></i> {{ message }}
              

            {% elif message.tags == 'alert-info' %}
              <i class="bi bi-info-circle me-1"></i> {{ message }}
              

            {% elif message.tags == 'alert-warning' %}
              <i class="bi bi-exclamation-triangle me-1"></i> {{ message }}
          {% endif %}

          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}


    <!-- End Page Title -->
    <section class="section dashboard">

      <div class="col-lg-12">
        <div class="row">
          <!-- Sales Card -->
          <div class="col-xxl-4 col-md-6">
            <div class="card info-card sales-card">

            
              <div class="card-body">
                <a class="" href="{% url 'personal' %}">
                  <h5 class="card-title">Personal  Contratado <span>| Revergy</span></h5>
                </a>
              
                <div class="d-flex align-items-center">
                  <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                    <i class="bi bi-people"></i>
                  </div>
                  <div class="ps-3">
                    <h6>{{ personal.count }}</h6>
                   
                    <span class="text-muted small pt-2 ps-2">Activos  </span><span class="text-success small pt-2 fw-bold">{{ personal_activo.count }}  </span>
                    <span class="text-muted small pt-2 ps-2">  Inactivos </span><span class="text-danger small pt-2 fw-bold"> {{ personal_inactivo.count }}  </span>
                  

                  </div>
                </div>
              </div>

            </div>
          </div><!-- End Sales Card -->

          <!-- Revenue Card -->
          <div class="col-xxl-4 col-md-6">
            <div class="card info-card revenue-card">

              <div class="card-body">
                <a class="" href="{% url 'analiticas' %}"><h5 class="card-title">Analiticas <span>| Proyectos</span></h5></a>

                <div class="d-flex align-items-center">
                  <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                    <i class="bi bi-graph-up"></i>
                  </div>
                  <div class="ps-3">
                    <h6>{{ analiticas.count }}</h6>
                    <span class="text-success small pt-1 fw-bold">{{ analiticas_activas.count }}</span> <span class="text-muted small pt-2 ps-1">Activas</span>

                  </div>
                </div>
              </div>

            </div>
          </div><!-- End Revenue Card -->

          <!-- Customers Card -->
          <div class="col-xxl-4 col-xl-12">

            <div class="card info-card customers-card">

              

              <div class="card-body">
                <a class="" href="{% url 'solicitudes' %}">
                <h5 class="card-title">Solicitudes <span>| Postulantes</span></h5>
                </a>

                <div class="d-flex align-items-center">
                  <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                    <i class="bi bi-envelope"></i>
                  </div>
                  <div class="ps-3">
                    <h6>{{ solicitudes_p.count }}</h6>
                    <span class="text-danger small pt-1 fw-bold">{{ solicitudes_p.count }}</span> <span class="text-muted small pt-2 ps-1">Pendientes</span>
                    <span class="text-success small pt-1 fw-bold">{{ solicitudes_r.count }}</span> <span class="text-muted small pt-2 ps-1">Revisados</span>

                  </div>
                </div>

              </div>
            </div>

          </div><!-- End Customers Card -->

          <div class="row">
            <div class="card card-header mb-2">
              <div class="col-lg-12 mb-2">
                <div class="row centrado-absoluto">
 

                  <div class="col-lg-8">
                    <div class="row centrado-absoluto">
                        <div class="col-lg-6 centrado-absoluto">
                          <img src="/static/images/logo_revergy.png" class="avatar rounded-circle" style="margin-top:0px;margin-right:0px;" alt="">

                          <h3 class="card-title"> Revergy Mexico<span> ENGINEERING SERVICES &amp; CONSULTANCY</span></h3>
                        </div>
                      </div>
                  </div>
                  <hr>


                </div>
              </div>
            </div>
          </div>


          <div class="col-lg-12">
            <div class="row">
              <div class="col-lg-5">

                <div class="card">
                  <div class="card-body" id="seccion_docs">
                    <h5 class="card-title"></h5>
          
                    <div class="pagetitle">
                      <h1> <i class="bi bi-calendar-event"></i> Eventos</h1>
                     

                      {% if eventos %}

                        <div class="col-lg-12">
                          <div class="row">
                            <div class="col-lg-8">
                            
                              <h3 class="card-title"><i class="bi bi-bookmarks-fill"></i>  
                                Eventos<span style="font-size:20px;"> | En curso <span class="badge rounded-pil bg-success text-light">{{ eventos.count }}</span></span>
                              </h3>
                            </div>

                            <div class="col-lg-4 centrado-absoluto">
                              <a class="btn btn-primary" href="{% url 'eventos_admin' %}" role="button"><i class="bi bi-calendar2-day"></i> Ir a Calendario
                              </a>
                            </div>

                          </div>


                          <div class="alert alert-primary text-center mb-2 md-2">
                            <p class="texto-parrafo"> Listado de eventos en curso asginados a postulantes </p>
                          </div>
                          
                        </div>  



                        {% else %}

                          <div class="alert alert-primary text-center">
                            <p class="texto-parrafo texto-alerts"> Sin eventos!.
                              Puede Agregar eventos para entrevistas a postulantes o como recordatorio.
                            </p>
                          </div>

                      {% endif %}
        
                      
                    </div><!-- End Breadcrumbs with a page title -->

                    <div class="container">

                      <div id="calendar" class="fc fc-media-screen fc-direction-ltr fc-theme-standard" style="height: 500px;"><div class="fc-header-toolbar fc-toolbar "><div class="fc-toolbar-chunk"><h2 class="fc-toolbar-title" id="fc-dom-1">12 â€“ 18 sept 2022</h2></div><div class="fc-toolbar-chunk"><div class="fc-button-group"><button type="button" title="Vista del mes" aria-pressed="false" class="fc-dayGridMonth-button fc-button fc-button-primary">Mes</button><button type="button" title="Vista de la semana" aria-pressed="false" class="fc-timeGridWeek-button fc-button fc-button-primary">Semana</button></div></div><div class="fc-toolbar-chunk"><button type="button" title="Esta semana" disabled="" aria-pressed="false" class="fc-today-button fc-button fc-button-primary">Hoy</button><div class="fc-button-group"><button type="button" title="Semana antes" aria-pressed="false" class="fc-prev-button fc-button fc-button-primary"><span class="fc-icon fc-icon-chevron-left"></span></button><button type="button" title="Semana siguiente" aria-pressed="false" class="fc-next-button fc-button fc-button-primary"><span class="fc-icon fc-icon-chevron-right"></span></button></div></div></div><div aria-labelledby="fc-dom-1" class="fc-view-harness fc-view-harness-active"><div class="fc-list  fc-list-sticky fc-listWeek-view fc-view"><div class="fc-scroller fc-scroller-liquid" style="overflow: hidden auto;"><div class="fc-list-empty"><div class="fc-list-empty-cushion">No hay eventos para mostrar</div></div></div></div></div></div>
                    </div>
        
          
                  </div>
                </div>
              </div>

              <div class="col-lg-7">

                <div class="card">
                  <div class="card-body" id="seccion_docs">
                    <h5 class="card-title"></h5>
          
                    <div class="pagetitle">
                      <h1> <i class="bi bi-gear"></i> Proyectos</h1>

                      <div class="col-lg-12">
                        <div class="row">
                          <div class="col-lg-8">

                            <h3 class="card-title"><i class="bi bi-ui-checks"></i> 
                              OYM<span style="font-size:20px;"> | Activos 
                                <span class="badge rounded-pil bg-success text-light">{{ proyectos.count }}</span></span>
                            </h3>

        
                              <a class="btn btn-primary" href="{% url 'proyectos' %}" role="button">
                                <i class="bi bi-gear"></i> Gestion de proyectos</a>

                          </div>

                        </div>
                      </div>
                      
                    </div><!-- End Breadcrumbs with a page title -->
          
                    
                    
          
                    <div class="alert alert-primary text-center">
                      <p class="texto-parrafo texto-alerts">
                        <i class="bi bi-info-circle-fill"></i> Listado de proyectos generados por clientes en el proceso 
                        de operacion y mantenimiento..
                      </p>
                    </div>
                    
                    
                    <div class="table-responsive">

                      <table class="table display dt-responsive nowrap" id="tb_personal" width="100%" cellspacing="0">
    
                        <thead class="table-light">
                          <tr class="estilo-table">
                            {% comment %} <th>Accion</th> {% endcomment %}
                            <th>Clave</th>
                            <th>Analitica</th>
                            <th>Parque</th>
                            <th>Cliente</th>
                            <th>Fecha Inicio</th>
                            <th>Fecha Fin*</th>
                            <th>Estatus</th>
                            
                          </tr>
                        </thead>
    
                        {% for OYM in proyectos %}
    
                        <tr class="estilo-table">
                          {% comment %} <td>
    
                            <a name="" type="button " id="modificar_analitica" class="btn btn-warning" href="{% url 'editar_personal'  id_personal=p.clave_personal %}" >
                              <i class="bi bi-pencil-square"></i>
                            </a>
                          </td> {% endcomment %}
                          <td>{{ OYM.id_proyecto }}</td>
                            <td>{{ OYM.analitica }}</td>
                            <td>{{ OYM.parque }}</td>
                            <td>{{ OYM.cliente }}</td>
                            <td>{{ OYM.fecha_inicio }}</td>
                            <td>{{ OYM.fecha_fin }}</td>
                            <td>
                              {% if OYM.estatus == "Activo" %}
                              <span class="badge rounded-pill bg-success">Activo</span>
                                {% else %}
                                <span class="badge rounded-pill bg-secondary">Inactivo</span>
                              {% endif %}
                           </td>
                           
                        </tr>
                        {% endfor%}
                      </table>
                    </div>
                    <p class="formato-lista">* La fecha fin de proyecto puede sufrir cambios dependiendo de las circurtancias
                      del proyecto, tecnicos, operador etc. Esta fecha se considera aproximada!</p>
          
                    
          
                  </div>
                </div>
              </div>
            </div>
          </div>

        


        </div>
      </div>
    </section>


{% endblock %}

{% block scripts %}

<script>

    document.addEventListener('DOMContentLoaded', function() {
      var calendarEl = document.getElementById('calendar');

      var calendar = new FullCalendar.Calendar(calendarEl, {
        timeZone:'America/Mexico_City',
        height:500,
        initialView: 'listWeek',
        editable: true,
{% comment %} 
        eventClick: function(){

          {% for i in eventos %}
          { window.location.href='/reclutamiento/entrevistas/evento/informacion/{{i.even_id}}' }
          {% endfor %}
          
         }, {% endcomment %}
         
        events: 
        [
          {% for i in eventos %}
              {
                title: "{{ i.event_name }}",
                start: '{{ i.start_date|date:"Y-m-d h:i" }}',
                end: '{{ i.end_date|date:"Y-m-d h:i" }}',
              

              },

          {% endfor %}
        ],
       
        
      });

      calendar.setOption('locale', 'ES');
      calendar.render();
    

    });




  </script>


{% endblock scripts %}
    
      